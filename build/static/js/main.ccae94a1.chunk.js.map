{"version":3,"sources":["components/Login/Login.module.css","components/UI/Input/Input.module.css","components/UI/Card/Card.module.css","components/UI/Button/Button.module.css","components/Home/Home.module.css","components/MainHeader/Navigation.module.css","components/MainHeader/MainHeader.module.css","components/UI/Card/Card.js","components/UI/Button/Button.js","store/auth-context.js","components/UI/Input/Input.js","components/Login/Login.js","components/Home/Home.js","components/MainHeader/Navigation.js","components/MainHeader/MainHeader.js","App.js","index.js"],"names":["module","exports","Card","props","className","classes","card","children","Button","type","button","onClick","disabled","AuthContext","React","createContext","isLoggedIn","onLogout","onLogin","email","password","AuthContextProvider","useState","setIsLoggedIn","useEffect","localStorage","getItem","Provider","value","removeItem","setItem","Input","forwardRef","ref","inputRef","useRef","activate","current","focus","useImperativeHandle","control","isValid","invalid","htmlFor","id","label","onChange","onBlur","emailReducer","state","action","val","includes","passwordReducer","trim","length","Login","formIsValid","setFormIsValid","useReducer","emailState","dispatchEmail","passwordState","dispatchPassword","authCtx","useContext","console","log","emailIsValid","passwordIsValid","identifier","setTimeout","clearTimeout","emailInputRef","passwordInputRef","login","onSubmit","event","preventDefault","target","actions","btn","Home","home","Navigation","ctx","nav","href","MainHeader","App","Fragment","ReactDOM","render","document","getElementById"],"mappings":"sHACAA,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,QAAU,yB,iBCAzDD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,QAAU,yB,iBCA7DD,EAAOC,QAAU,CAAC,KAAO,qB,gBCAzBD,EAAOC,QAAU,CAAC,OAAS,yB,gBCA3BD,EAAOC,QAAU,CAAC,KAAO,qB,gBCAzBD,EAAOC,QAAU,CAAC,IAAM,0B,gBCAxBD,EAAOC,QAAU,CAAC,cAAc,kC,qICSjBC,EANF,SAACC,GACZ,OACE,qBAAKC,UAAS,UAAKC,IAAQC,KAAb,YAAqBH,EAAMC,WAAzC,SAAuDD,EAAMI,Y,gCCWlDC,EAbA,SAACL,GACd,OACE,wBACEM,KAAMN,EAAMM,MAAQ,SACpBL,UAAS,UAAKC,IAAQK,OAAb,YAAuBP,EAAMC,WACtCO,QAASR,EAAMQ,QACfC,SAAUT,EAAMS,SAJlB,SAMGT,EAAMI,YCVPM,EAAcC,IAAMC,cAAc,CACtCC,YAAY,EACZC,SAAU,aACVC,QAAS,SAACC,EAAOC,OAGNC,EAAsB,SAAClB,GAClC,MAAoCmB,oBAAS,GAA7C,mBAAON,EAAP,KAAmBO,EAAnB,KAEAC,qBAAU,WAG6B,MADAC,aAAaC,QAAQ,eAExDH,GAAc,KAEf,IAaH,OACE,cAACV,EAAYc,SAAb,CACEC,MAAO,CACLZ,WAAYA,EACZC,SAfgB,WACpBQ,aAAaI,WAAW,cAExBN,GAAc,IAaVL,QAVe,WACnBO,aAAaK,QAAQ,aAAc,KAEnCP,GAAc,KAGd,SAOGpB,EAAMI,YAIEM,I,gBCJAkB,EAnCDjB,IAAMkB,YAAW,SAAC7B,EAAO8B,GACrC,IAAMC,EAAWC,mBAIXC,EAAW,WACfF,EAASG,QAAQC,SAMnB,OAHAC,8BAAoBN,GAAK,WACvB,MAAO,CAAEK,MAAOF,MAGhB,sBACEhC,UAAS,UAAKC,IAAQmC,QAAb,aACW,IAAlBrC,EAAMsC,QAAoBpC,IAAQqC,QAAU,IAFhD,UASE,uBAAOC,QAASxC,EAAMyC,GAAtB,SAA2BzC,EAAM0C,QACjC,uBACEZ,IAAKC,EACLzB,KAAMN,EAAMM,KACZmC,GAAIzC,EAAMyC,GACVhB,MAAOzB,EAAMyB,MACbkB,SAAU3C,EAAM2C,SAChBC,OAAQ5C,EAAM4C,eCjBhBC,EAAe,SAACC,EAAOC,GAE3B,MAAoB,eAAhBA,EAAOzC,KAGF,CAAEmB,MAAOsB,EAAOC,IAAKV,QAASS,EAAOC,IAAIC,SAAS,MAEvC,eAAhBF,EAAOzC,KACF,CAAEmB,MAAOqB,EAAMrB,MAAOa,QAASQ,EAAMrB,MAAMwB,SAAS,MAEtD,CAAExB,MAAO,GAAIa,SAAS,IAGzBY,EAAkB,SAACJ,EAAOC,GAC9B,MAAoB,eAAhBA,EAAOzC,KACF,CAAEmB,MAAOsB,EAAOC,IAAKV,QAASS,EAAOC,IAAIG,OAAOC,OAAS,GAE9C,eAAhBL,EAAOzC,KACF,CAAEmB,MAAOqB,EAAMrB,MAAOa,QAASQ,EAAMrB,MAAM0B,OAAOC,OAAS,GAE7D,CAAE3B,MAAO,GAAIa,SAAS,IAyIhBe,EAvID,SAACrD,GAKb,MAAsCmB,oBAAS,GAA/C,mBAAOmC,EAAP,KAAoBC,EAApB,KAEA,EAAoCC,qBAAWX,EAAc,CAC3DpB,MAAO,GACPa,QAAS,OAFX,mBAAOmB,EAAP,KAAmBC,EAAnB,KAIA,EAA0CF,qBAAWN,EAAiB,CACpEzB,MAAO,GACPa,QAAS,OAFX,mBAAOqB,EAAP,KAAsBC,EAAtB,KAIMC,EAAUC,qBAAWpD,GAC3BW,qBAAU,WAER,OADA0C,QAAQC,IAAI,kBACL,WACLD,QAAQC,IAAI,mBAEb,IAIH,IAAiBC,EAAiBR,EAA1BnB,QACS4B,EAAoBP,EAA7BrB,QACRjB,qBAAU,WAER,IAAM8C,EAAaC,YAAW,WAC5BL,QAAQC,IAAI,uBACZT,EAAeU,GAAgBC,KAC9B,KAEH,OAAO,WACLH,QAAQC,IAAI,WACZK,aAAaF,MAEd,CAACF,EAAcC,IAsClBH,QAAQC,IAAIV,GACZ,IAaMgB,EAAgBtC,mBAChBuC,EAAmBvC,mBAEzB,OACE,cAAC,EAAD,CAAM/B,UAAWC,IAAQsE,MAAzB,SACE,uBAAMC,SAlBY,SAACC,GACrBA,EAAMC,iBACNZ,QAAQC,IAAIV,GACRA,GACFO,EAAQ9C,QAAQ0C,EAAWhC,MAAOkC,EAAclC,OAChDsC,QAAQC,IAAIV,IACFW,EAIVM,EAAiBrC,QAAQC,QAFzBmC,EAAcpC,QAAQC,SAUtB,UACE,cAAC,EAAD,CACEL,IAAKwC,EACL5B,MAAM,SAENJ,QAAS2B,EACT3D,KAAK,QACLmC,GAAG,QAEHhB,MAAOgC,EAAWhC,MAClBkB,SAjEmB,SAAC+B,GAM1BhB,EAAc,CAAEpD,KAAM,aAAc0C,IAAK0B,EAAME,OAAOnD,SA4DhDmB,OA9CqB,WAO3Bc,EAAc,CAAEpD,KAAM,kBA0ClB,cAAC,EAAD,CACEwB,IAAKyC,EACL7B,MAAM,WACND,GAAG,WAEHH,QAAS4B,EACT5D,KAAK,WACLmB,MAAOkC,EAAclC,MACrBkB,SAjEsB,SAAC+B,GAK7Bd,EAAiB,CAAEtD,KAAM,aAAc0C,IAAK0B,EAAME,OAAOnD,SA6DnDmB,OAhDwB,WAI9BgB,EAAiB,CAAEtD,KAAM,kBA+CrB,qBAAKL,UAAWC,IAAQ2E,QAAxB,SACE,cAAC,EAAD,CACEvE,KAAK,SACLL,UAAWC,IAAQ4E,IAFrB,2B,gBC/IKC,EATF,SAAC/E,GACZ,IAAM6D,EAAUC,qBAAWpD,GAC3B,OACE,eAAC,EAAD,CAAMT,UAAWC,IAAQ8E,KAAzB,UACE,+CADF,IACyB,cAAC,EAAD,CAAQxE,QAASqD,EAAQ/C,SAAzB,wB,iBCmBdmE,EAzBI,WACjB,IAAMC,EAAMpB,qBAAWpD,GACvB,OACE,qBAAKT,UAAWC,IAAQiF,IAAxB,SACE,+BACGD,EAAIrE,YACH,6BACE,mBAAGuE,KAAK,IAAR,qBAGHF,EAAIrE,YACH,6BACE,mBAAGuE,KAAK,IAAR,qBAGHF,EAAIrE,YACH,6BACE,wBAAQL,QAAS0E,EAAIpE,SAArB,4B,iBCRGuE,EATI,SAACrF,GAClB,OACE,yBAAQC,UAAWC,IAAQ,eAA3B,UACE,gDACA,cAAC,EAAD,QCWSoF,MAbf,WACE,IAAMJ,EAAMpB,qBAAWpD,GACvB,OACE,eAAC,IAAM6E,SAAP,WACE,cAAC,EAAD,IACA,kCACIL,EAAIrE,YAAc,cAAC,EAAD,IACnBqE,EAAIrE,YAAc,cAAC,EAAD,WCP3B2E,IAASC,OACP,cAAC,EAAD,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.ccae94a1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__2Px22\",\"actions\":\"Login_actions__1b5Oz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"control\":\"Input_control__7JYPz\",\"invalid\":\"Input_invalid__1XscM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__1te4P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2lgkF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__3idT9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__JfAVK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-header\":\"MainHeader_main-header__2OmAM\"};","import React from 'react';\n\nimport classes from './Card.module.css';\n\nconst Card = (props) => {\n  return (\n    <div className={`${classes.card} ${props.className}`}>{props.children}</div>\n  );\n};\n\nexport default Card;\n","import React from 'react';\n\nimport classes from './Button.module.css';\n\nconst Button = (props) => {\n  return (\n    <button\n      type={props.type || 'button'}\n      className={`${classes.button} ${props.className}`}\n      onClick={props.onClick}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { useState, useEffect } from \"react\";\n\nconst AuthContext = React.createContext({\n  isLoggedIn: false,\n  onLogout: () => {},\n  onLogin: (email, password) => {},\n});\n\nexport const AuthContextProvider = (props) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    //check for locale storage\n    const storeUserLoggedInInformation = localStorage.getItem(\"isLoggedIn\");\n    if (storeUserLoggedInInformation === \"1\") {\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const logoutHandler = () => {\n    localStorage.removeItem(\"isLoggedIn\");\n\n    setIsLoggedIn(false);\n  };\n\n  const loginHandler = () => {\n    localStorage.setItem(\"isLoggedIn\", \"1\");\n\n    setIsLoggedIn(true);\n  };\n  return (\n    <AuthContext.Provider\n      value={{\n        isLoggedIn: isLoggedIn,\n        onLogout: logoutHandler,\n        onLogin: loginHandler,\n      }}\n    >\n      {props.children}\n    </AuthContext.Provider>\n  );\n};\nexport default AuthContext;\n","import classes from \"./Input.module.css\";\nimport React, { useRef, useEffect, useImperativeHandle } from \"react\";\n\nconst Input = React.forwardRef((props, ref) => {\n  const inputRef = useRef();\n  // useEffect(() => {\n  //   inputRef.current.focus();\n  // }, []);\n  const activate = () => {\n    inputRef.current.focus();\n  };\n  //to use ref and translation object\n  useImperativeHandle(ref, () => {\n    return { focus: activate };\n  });\n  return (\n    <div\n      className={`${classes.control} ${\n        props.isValid === false ? classes.invalid : \"\"\n      }`}\n\n      // className={`${classes.control} ${\n      //   props.emailState.isValid === false ? classes.invalid : \"\"\n      // }`}\n    >\n      <label htmlFor={props.id}>{props.label}</label>\n      <input\n        ref={inputRef}\n        type={props.type}\n        id={props.id}\n        value={props.value}\n        onChange={props.onChange}\n        onBlur={props.onBlur}\n      />\n    </div>\n  );\n});\n\nexport default Input;\n","import React, {\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useRef,\n} from \"react\";\n\nimport Card from \"../UI/Card/Card\";\nimport classes from \"./Login.module.css\";\nimport Button from \"../UI/Button/Button\";\nimport AuthContext from \"../../store/auth-context\";\nimport Input from \"../UI/Input/Input\";\n\n//REDUCER FN\nconst emailReducer = (state, action) => {\n  //if there is user input retun the new snapshot\n  if (action.type === \"USER_INPUT\") {\n    //difference betwen val and value\n    //Dispacth is the action\n    return { value: action.val, isValid: action.val.includes(\"@\") };\n  }\n  if (action.type === \"INPUT_BLUR\") {\n    return { value: state.value, isValid: state.value.includes(\"@\") };\n  }\n  return { value: \"\", isValid: false };\n};\n//REDUCER FN\nconst passwordReducer = (state, action) => {\n  if (action.type === \"USER_INPUT\") {\n    return { value: action.val, isValid: action.val.trim().length > 6 };\n  }\n  if (action.type === \"INPUT_BLUR\") {\n    return { value: state.value, isValid: state.value.trim().length > 6 };\n  }\n  return { value: \"\", isValid: false };\n};\nconst Login = (props) => {\n  // const [enteredEmail, setEnteredEmail] = useState(\"\");\n  // const [emailIsValid, setEmailIsValid] = useState();\n  // const [enteredPassword, setEnteredPassword] = useState(\"\");\n  // const [passwordIsValid, setPasswordIsValid] = useState();\n  const [formIsValid, setFormIsValid] = useState(false);\n  //USE REDUCER DECLARE\n  const [emailState, dispatchEmail] = useReducer(emailReducer, {\n    value: \"\",\n    isValid: null,\n  });\n  const [passwordState, dispatchPassword] = useReducer(passwordReducer, {\n    value: \"\",\n    isValid: null,\n  });\n  const authCtx = useContext(AuthContext);\n  useEffect(() => {\n    console.log(\"EFFECT RUNNING\");\n    return () => {\n      console.log(\"EFFECT CLEAN\");\n    };\n  }, []);\n  //onject destructing by giving aliat emailIsValid optimze use effect so that the functiondoes not do extra chekign after the from was already valid, only check when there is change in validity\n\n  //USE REDUCERE STATE emailState\n  const { isValid: emailIsValid } = emailState;\n  const { isValid: passwordIsValid } = passwordState;\n  useEffect(() => {\n    //effect function rerun when entered email of password changes\n    const identifier = setTimeout(() => {\n      console.log(\"check form validity\");\n      setFormIsValid(emailIsValid && passwordIsValid);\n    }, 500);\n\n    return () => {\n      console.log(\"cleanup\");\n      clearTimeout(identifier);\n    };\n  }, [emailIsValid, passwordIsValid]);\n\n  const emailChangeHandler = (event) => {\n    // setEnteredEmail(event.target.value);\n    //updating state based on two other states, NEEDs funnction form. IF NEXT state update depends on prev state snapshot of SAME state. Here we depends on two other state snapshots of different  states not SetFormValidity\n    // setFormIsValid can run before before enteredPassword state updaate processes (may not have latest enteres passowrd )\n\n    //ACTIVATE DISPATCH FN in email changehandler\n    dispatchEmail({ type: \"USER_INPUT\", val: event.target.value });\n\n    //can comment out if useEffect\n    // setFormIsValid(event.target.value.includes(\"@\") && passwordState.isValid);\n  };\n\n  const passwordChangeHandler = (event) => {\n    // setEnteredPassword(event.target.value);\n    // setFormIsValid(emailState.isValid && event.target.value.trim().length > 6);\n\n    //DISPATCH FN\n    dispatchPassword({ type: \"USER_INPUT\", val: event.target.value });\n  };\n\n  const validateEmailHandler = () => {\n    //isValidstate depends on the enteredemail state and cant pass prevstate in setEmail valid because the prevs ate is not that of the entered email\n    //can also do email state onbject with value and valid in same object\n\n    // setEmailIsValid(emailState.isValid);\n\n    //ACTIVATE DISPATCH FN in validate email changehandler\n    dispatchEmail({ type: \"INPUT_BLUR\" });\n  };\n\n  const validatePasswordHandler = () => {\n    // setPasswordIsValid(enteredPassword.trim().length > 6);\n\n    //DISPATCH FN when is BLUR\n    dispatchPassword({ type: \"INPUT_BLUR\" });\n  };\n  console.log(formIsValid);\n  const submitHandler = (event) => {\n    event.preventDefault();\n    console.log(formIsValid);\n    if (formIsValid) {\n      authCtx.onLogin(emailState.value, passwordState.value);\n      console.log(formIsValid);\n    } else if (!emailIsValid) {\n      //focus back on the invalis input\n      emailInputRef.current.focus();\n    } else {\n      passwordInputRef.current.focus();\n    }\n  };\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  return (\n    <Card className={classes.login}>\n      <form onSubmit={submitHandler}>\n        <Input\n          ref={emailInputRef}\n          label=\"E-mail\"\n          // for  props.isValid or  props.emailState.isValid\n          isValid={emailIsValid}\n          type=\"email\"\n          id=\"email\"\n          //USE REDUCER EMAIL STE\n          value={emailState.value}\n          onChange={emailChangeHandler}\n          onBlur={validateEmailHandler}\n        />\n\n        <Input\n          ref={passwordInputRef}\n          label=\"password\"\n          id=\"password\"\n          // for  props.isValid or  props.emailState.isValid\n          isValid={passwordIsValid}\n          type=\"password\"\n          value={passwordState.value}\n          onChange={passwordChangeHandler}\n          onBlur={validatePasswordHandler}\n        />\n\n        <div className={classes.actions}>\n          <Button\n            type=\"submit\"\n            className={classes.btn}\n            //remove to be always clickable disabled={!formIsValid}\n          >\n            Login\n          </Button>\n        </div>\n      </form>\n    </Card>\n  );\n};\n\nexport default Login;\n","import React, { useContext } from \"react\";\nimport AuthContext from \"../../store/auth-context\";\nimport Button from \"../UI/Button/Button\";\n\nimport Card from \"../UI/Card/Card\";\nimport classes from \"./Home.module.css\";\n\nconst Home = (props) => {\n  const authCtx = useContext(AuthContext);\n  return (\n    <Card className={classes.home}>\n      <h1>Welcome back!</h1> <Button onClick={authCtx.onLogout}>Logout</Button>\n    </Card>\n  );\n};\n\nexport default Home;\n","import React, { useContext } from \"react\";\n\nimport classes from \"./Navigation.module.css\";\nimport AuthContext from \"../../store/auth-context\";\n\nconst Navigation = () => {\n  const ctx = useContext(AuthContext);\n  return (\n    <nav className={classes.nav}>\n      <ul>\n        {ctx.isLoggedIn && (\n          <li>\n            <a href=\"/\">Users</a>\n          </li>\n        )}\n        {ctx.isLoggedIn && (\n          <li>\n            <a href=\"/\">Admin</a>\n          </li>\n        )}\n        {ctx.isLoggedIn && (\n          <li>\n            <button onClick={ctx.onLogout}>Logout</button>\n          </li>\n        )}\n      </ul>\n    </nav>\n  );\n};\n\nexport default Navigation;\n","import React from \"react\";\n\nimport Navigation from \"./Navigation\";\nimport classes from \"./MainHeader.module.css\";\n\nconst MainHeader = (props) => {\n  return (\n    <header className={classes[\"main-header\"]}>\n      <h1>A Typical Page</h1>\n      <Navigation />\n    </header>\n  );\n};\n\nexport default MainHeader;\n","import React, { useContext } from \"react\";\n\nimport Login from \"./components/Login/Login\";\nimport Home from \"./components/Home/Home\";\nimport MainHeader from \"./components/MainHeader/MainHeader\";\nimport AuthContext from \"./store/auth-context\";\n\nfunction App() {\n  const ctx = useContext(AuthContext);\n  return (\n    <React.Fragment>\n      <MainHeader />\n      <main>\n        {!ctx.isLoggedIn && <Login />}\n        {ctx.isLoggedIn && <Home />}\n      </main>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport { AuthContextProvider } from \"./store/auth-context\";\n\nReactDOM.render(\n  <AuthContextProvider>\n    <App />\n  </AuthContextProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}